class Form{constructor(t){this._id=this.incrementId(),this.form=$(`#${t}`),this.formData=new FormData(this.form[0]),this.formData.append("_method",this.form.attr("method")),this.formData.append("_token",$('meta[name="csrf-token"]').attr("content")),this.formId=t}incrementId(){this._id?this._id++:this._id=1}sendRequest(t=!1){let e=this;e.clearError(),$.ajax({type:"POST",url:e.form.attr("action"),data:e.formData,async:!0,cache:!1,processData:!1,contentType:!1,success:function(e){return Notification.message("Success",e.message,"success",2e3),t&&setTimeout(function(){},2e3),!0},error:function(t){return Notification.message("Error",e.errorMessage(t),"danger",5e3),!1}})}errorMessage(t){let e=JSON.parse(t.responseText),s="";if($(".invalid-feedback").remove(),$(".is-invalid").removeClass("is-invalid"),422===t.status){s+="<ul>";let e=JSON.parse(t.responseText);$.each(e.errors,function(t,e){let a=$(`[name='${t}']`);if(a.is(":radio"))a=$(`input[name='${t}']:checked`);else{if(t.includes(".")){let[e,s]=t.split(".");a=$(`[name='${e}[${s}]']`)}else a=$(`[name='${t}']`);a||(a=$(`[name='${t}[]']`)),a.after(`<div class="invalid-feedback">${e}</div>`)}a.addClass("is-invalid"),s+=`<li>${e}</li>`}),$.each(e.success,function(t,e){let s=$(`[name='${t}']`);s.is(":radio")?s=$(`input[name='${t}']:checked`):(s||(s=$(`[name='${t}[]']`)),s.after(`<div class="valid-feedback">${e}</div>`)),s.addClass("is-valid")}),s+="</ul>"}else s+=`<ul><li>${e.message}</li></ul>`;return s}clearError(){$(".invalid-feedback").remove(),$(".is-invalid").removeClass("is-invalid")}}class Notification{constructor(t){this._id=Notification.incrementId()}static incrementId(){this._id?this._id++:this._id=1}static message(t,e,s,a=null){let i="data-autohide='false'";null===a||isNaN(a)||(i=`data-delay='${a}' data-autohide='true'`),$(".toast-dynamic").append(`<div class="toast toast-auto-${this._id}" ${i}>\n               <div class="toast-header">\n               <strong class="mr-auto text-${s}">${t}</strong>\n               <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                   <span aria-hidden="true" class="close-toast">&times;</span>\n               </button>\n           </div>\n            <div class="toast-body">\n                ${e}\n            </div></div>`),$(`.toast-auto-${this._id}`).toast("show"),Notification.incrementId()}}
